<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Play-Example-Quality-Assurance : Automated quality assurance tool integration (checkstyle, pmd, jacoco, findbugs, javadoc/scaladoc) for the Play Framework" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Play-Example-Quality-Assurance</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/ics-software-engineering/play-example-quality-assurance">View on GitHub</a>

          <h1 id="project_title">Play-Example-Quality-Assurance</h1>
          <h2 id="project_tagline">Automated quality assurance tool integration (checkstyle, pmd, jacoco, findbugs, javadoc/scaladoc) for the Play Framework</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/ics-software-engineering/play-example-quality-assurance/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/ics-software-engineering/play-example-quality-assurance/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="overview" class="anchor" href="#overview"><span class="octicon octicon-link"></span></a>Overview</h1>

<p>This system illustrates how to integrate the following quality assurance tools with <a href="http://www.playframework.com/">Play</a> applications:</p>

<ul>
<li>
<a href="http://pmd.sourceforge.net/">PMD</a> source code analysis</li>
<li>
<a href="http://checkstyle.sourceforge.net/">Checkstyle</a> source code analysis</li>
<li>
<a href="http://findbugs.sourceforge.net/">FindBugs</a> byte code analysis</li>
<li>
<a href="http://www.oracle.com/technetwork/java/javase/documentation/index-jsp-135444.html">JavaDoc</a> and <a href="http://docs.scala-lang.org/style/scaladoc.html">ScalaDoc</a> documentation generation</li>
<li>
<a href="http://www.eclemma.org/jacoco/">Jacoco</a> test coverage analysis</li>
</ul><p>The code is designed to allow you to add only those tools that you need for your project. Installation and running
of each tool is discussed separately below.</p>

<h1>
<a name="pmd" class="anchor" href="#pmd"><span class="octicon octicon-link"></span></a>PMD</h1>

<h2>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h2>

<ul>
<li>Update <a href="https://github.com/ics-software-engineering/play-example-quality-assurance/blob/master/project/plugins.sbt">project/plugins.sbt</a> with the PMD library dependency.</li>
<li>Add <a href="https://github.com/ics-software-engineering/play-example-quality-assurance/blob/master/project/pmd-ruleset.xml">project/pmd-ruleset.xml</a>
</li>
<li>Add <a href="https://github.com/ics-software-engineering/play-example-quality-assurance/blob/master/project/PmdSettings.scala">project/PmdSettings.scala</a>
</li>
<li>Add <a href="https://github.com/ics-software-engineering/play-example-quality-assurance/blob/master/qa.pmd.sbt">qa.pmd.sbt</a>
</li>
</ul><p>Note that the current implementation of PMD conflicts with the current implementation of Jacoco. Only one or the other can be installed. 
See the Jacoco documentation below for more details. </p>

<h2>
<a name="invocation" class="anchor" href="#invocation"><span class="octicon octicon-link"></span></a>Invocation</h2>

<pre><code>[~/projecthosting/github/play-example-quality-assurance]-&gt; play pmd
[info] Loading project definition from /Users/johnson/projecthosting/github/play-example-quality-assurance/project
[info] Set current project to play-example-quality-assurance (in build file:/Users/johnson/projecthosting/github/play-example-quality-assurance/)
[info] Running PMD...
[info] &lt;?xml version="1.0" encoding="UTF-8"?&gt;
[info] &lt;pmd version="5.0.0" timestamp="2014-01-10T13:05:53.566"&gt;
[info] &lt;/pmd&gt;
[success] Total time: 1 s, completed Jan 10, 2014 1:05:53 PM
</code></pre>

<p>The output file is in target/pmd/pmd-report.xml and echoed to the console.  For Play's default application, no PMD warnings are generated.</p>

<h1>
<a name="checkstyle" class="anchor" href="#checkstyle"><span class="octicon octicon-link"></span></a>Checkstyle</h1>

<h2>
<a name="installation-1" class="anchor" href="#installation-1"><span class="octicon octicon-link"></span></a>Installation</h2>

<ul>
<li>Update <a href="https://github.com/ics-software-engineering/play-example-quality-assurance/blob/master/project/plugins.sbt">project/plugins.sbt</a> with the Checkstyle library dependency.</li>
<li>Add <a href="https://github.com/ics-software-engineering/play-example-quality-assurance/blob/master/project/checkstyle-config.xml">project/checkstyle-config.xml</a>
</li>
<li>Add <a href="https://github.com/ics-software-engineering/play-example-quality-assurance/blob/master/project/CheckstyleSettings.scala">project/CheckstyleSettings.scala</a>
</li>
<li>Add <a href="https://github.com/ics-software-engineering/play-example-quality-assurance/blob/master/qa.checkstyle.sbt">qa.checkstyle.sbt</a> </li>
</ul><h2>
<a name="invocation-1" class="anchor" href="#invocation-1"><span class="octicon octicon-link"></span></a>Invocation</h2>

<pre><code>[~/projecthosting/github/play-example-quality-assurance]-&gt; play checkstyle
[info] Loading project definition from /Users/johnson/projecthosting/github/play-example-quality-assurance/project
[info] Set current project to play-example-quality-assurance (in build file:/Users/johnson/projecthosting/github/play-example-quality-assurance/)
[info] Running checkstyle...
[info] &lt;?xml version="1.0" encoding="UTF-8"?&gt;
[info] &lt;checkstyle version="5.5"&gt;
[info] &lt;file name="/Users/johnson/projecthosting/github/play-example-quality-assurance/app/controllers/Application.java"&gt;
[info] &lt;error line="0" severity="error" message="Missing package-info.java file." source="com.puppycrawl.tools.checkstyle.checks.javadoc.JavadocPackageCheck"/&gt;
[info] &lt;error line="3" severity="error" message="Using the &amp;apos;.*&amp;apos; form of import should be avoided - play.*." source="com.puppycrawl.tools.checkstyle.checks.imports.AvoidStarImportCheck"/&gt;
[info] &lt;error line="4" severity="error" message="Using the &amp;apos;.*&amp;apos; form of import should be avoided - play.mvc.*." source="com.puppycrawl.tools.checkstyle.checks.imports.AvoidStarImportCheck"/&gt;
[info] &lt;error line="6" severity="error" message="Using the &amp;apos;.*&amp;apos; form of import should be avoided - views.html.*." source="com.puppycrawl.tools.checkstyle.checks.imports.AvoidStarImportCheck"/&gt;
[info] &lt;error line="8" severity="error" message="Missing a Javadoc comment." source="com.puppycrawl.tools.checkstyle.checks.javadoc.JavadocTypeCheck"/&gt;
[info] &lt;error line="10" column="5" severity="error" message="Missing a Javadoc comment." source="com.puppycrawl.tools.checkstyle.checks.javadoc.JavadocMethodCheck"/&gt;
[info] &lt;/file&gt;
[info] &lt;file name="/Users/johnson/projecthosting/github/play-example-quality-assurance/app/views/index.scala.html"&gt;
[info] &lt;/file&gt;
[info] &lt;file name="/Users/johnson/projecthosting/github/play-example-quality-assurance/app/views/main.scala.html"&gt;
[info] &lt;/file&gt;
[info] &lt;/checkstyle&gt;
[success] Total time: 1 s, completed Jan 10, 2014 1:08:06 PM
</code></pre>

<p>The output file is in target/checkstyle/checkstyle-report.xml and also echoed to the console. For Play's default application, 6 Checkstyle warnings are generated.</p>

<h1>
<a name="findbugs" class="anchor" href="#findbugs"><span class="octicon octicon-link"></span></a>FindBugs</h1>

<h2>
<a name="installation-2" class="anchor" href="#installation-2"><span class="octicon octicon-link"></span></a>Installation</h2>

<ul>
<li>Update <a href="https://github.com/ics-software-engineering/play-example-quality-assurance/blob/master/project/plugins.sbt">project/plugins.sbt</a> with the FindBugs sbt plugin.</li>
<li>Add <a href="https://github.com/ics-software-engineering/play-example-quality-assurance/blob/master/project/findbugs-exclude-filters.xml">project/findbugs-exclude-filters.xml</a>
</li>
<li>Add <a href="https://github.com/ics-software-engineering/play-example-quality-assurance/blob/master/qa.findbugs.sbt">qa.findbugs.sbt</a> </li>
</ul><h2>
<a name="invocation-2" class="anchor" href="#invocation-2"><span class="octicon octicon-link"></span></a>Invocation</h2>

<pre><code>[~/projecthosting/github/play-example-quality-assurance]-&gt; play findbugs
[info] Loading project definition from /Users/johnson/projecthosting/github/play-example-quality-assurance/project
[info] Set current project to play-example-quality-assurance (in build file:/Users/johnson/projecthosting/github/play-example-quality-assurance/)
[success] Total time: 7 s, completed Jun 10, 2013 1:45:10 PM
</code></pre>

<p>The output file is in <code>target/findbugs/findbugs.xml</code>.<br>
For Play's default application, no FindBug errors are generated, but the plugin will output the number of warnings found if non-zero.</p>

<h1>
<a name="jacoco" class="anchor" href="#jacoco"><span class="octicon octicon-link"></span></a>Jacoco</h1>

<h2>
<a name="installation-3" class="anchor" href="#installation-3"><span class="octicon octicon-link"></span></a>Installation</h2>

<ul>
<li>Update <a href="https://github.com/ics-software-engineering/play-example-quality-assurance/blob/master/project/plugins.sbt">project/plugins.sbt</a> with the Jacoco sbt plugin.</li>
<li>Add <a href="https://github.com/ics-software-engineering/play-example-quality-assurance/blob/master/qa.jacoco.sbt">qa.jacoco.sbt</a>
</li>
</ul><p>Note: Due to ASM library incompatibilities (?), you cannot install both Jacoco and PMD.  If you do, then Jacoco
will report the following error:</p>

<pre><code>[error] (jacoco:fullClasspath) java.lang.IncompatibleClassChangeError: class org.jacoco.core.internal.flow.ClassProbesVisitor has interface org.objectweb.asm.ClassVisitor as super class
</code></pre>

<h2>
<a name="invocation-3" class="anchor" href="#invocation-3"><span class="octicon octicon-link"></span></a>Invocation</h2>

<pre><code>[~/projecthosting/github/play-example-quality-assurance]-&gt; play jacoco:cover
[info] Loading project definition from /Users/johnson/projecthosting/github/play-example-quality-assurance/project
[info] Set current project to play-example-quality-assurance (in build file:/Users/johnson/projecthosting/github/play-example-quality-assurance/)
[info] ApplicationTest
[info] + ApplicationTest.simpleCheck
[info] + ApplicationTest.renderTemplate
[info] 
[info] 
[info] Total for test ApplicationTest
[info] Finished in 0.239 seconds
[info] 2 tests, 0 failures, 0 errors
[info] IntegrationTest
[info] + IntegrationTest.test
[info] 
[info] 
[info] Total for test IntegrationTest
[info] Finished in 2.875 seconds
[info] 1 tests, 0 failures, 0 errors
[info] Passed: : Total 3, Failed 0, Errors 0, Passed 3, Skipped 0
[success] Total time: 4 s, completed Jun 10, 2013 1:51:29 PM
</code></pre>

<p>The output report is available in <code>target/jacoco/html/index.html</code>.<br>
For Play's default application, statement coverage is 57%.</p>

<h1>
<a name="javadoc-and-scaladoc" class="anchor" href="#javadoc-and-scaladoc"><span class="octicon octicon-link"></span></a>JavaDoc and ScalaDoc</h1>

<h2>
<a name="installation-4" class="anchor" href="#installation-4"><span class="octicon octicon-link"></span></a>Installation</h2>

<ul>
<li>Add <a href="https://github.com/ics-software-engineering/play-example-quality-assurance/blob/master/project/ApiDocSettings.scala">project/ApiDocSettings.scala</a>
</li>
<li>Add <a href="https://github.com/ics-software-engineering/play-example-quality-assurance/blob/master/qa.apidoc.sbt">qa.apidoc.sbt</a> </li>
</ul><h2>
<a name="invocation-4" class="anchor" href="#invocation-4"><span class="octicon octicon-link"></span></a>Invocation</h2>

<pre><code>[~/projecthosting/github/play-example-quality-assurance]-&gt; play api-doc
[info] Loading project definition from /Users/johnson/projecthosting/github/play-example-quality-assurance/project
[info] Set current project to play-example-quality-assurance (in build file:/Users/johnson/projecthosting/github/play-example-quality-assurance/)
[info] No sources available, skipping Scala API documentation...
[info] Creating destination directory: "target/doc/api/java/"
[info] Loading source files for package controllers...
[info] Loading source files for package tests...
[info] Constructing Javadoc information...
[info] Standard Doclet version 1.7.0_10
[info] Building tree for all the packages and classes...
[info] Generating target/doc/api/java/controllers/Application.html...
[info] Generating target/doc/api/java/tests/ApplicationTest.html...
[info] Generating target/doc/api/java/tests/IntegrationTest.html...
[info] Generating target/doc/api/java/overview-frame.html...
[info] Generating target/doc/api/java/controllers/package-frame.html...
[info] Generating target/doc/api/java/controllers/package-summary.html...
[info] Generating target/doc/api/java/controllers/package-tree.html...
[info] Generating target/doc/api/java/tests/package-frame.html...
[info] Generating target/doc/api/java/tests/package-summary.html...
[info] Generating target/doc/api/java/tests/package-tree.html...
[info] Generating target/doc/api/java/constant-values.html...
[info] Generating target/doc/api/java/src-html/controllers/Application.html...
[info] Generating target/doc/api/java/src-html/tests/IntegrationTest.html...
[info] Generating target/doc/api/java/src-html/tests/ApplicationTest.html...
[info] Building index for all the packages and classes...
[info] Generating target/doc/api/java/overview-tree.html...
[info] Generating target/doc/api/java/index-all.html...
[info] Generating target/doc/api/java/deprecated-list.html...
[info] Building index for all classes...
[info] Generating target/doc/api/java/allclasses-frame.html...
[info] Generating target/doc/api/java/allclasses-noframe.html...
[info] Generating target/doc/api/java/index.html...
[info] Generating target/doc/api/java/overview-summary.html...
[info] Generating target/doc/api/java/help-doc.html...
API documentation in target/doc/api

[success] Total time: 2 s, completed Jun 10, 2013 1:55:36 PM
</code></pre>

<p>The API documentation can be found in <code>target/doc/api</code>.</p>

<p>NOTE: With this approach, in order for test code to be documented by JavaDoc, you must locate them a package called 
"tests" inside the top-level test/ directory. See this repo for an example.
This is a change from the "play new" command, which puts the sample tests in the default package.  Creating a
"tests" package creates consistency with the existing Play convention of "controllers", "models", and "views"
packages.  </p>

<h1>
<a name="credits" class="anchor" href="#credits"><span class="octicon octicon-link"></span></a>Credits</h1>

<ul>
<li>Tweaked docs and migrated to Play 2.2.0 build.sbt format, thanks to Mike Slinn: <a href="https://github.com/mslinn">https://github.com/mslinn</a>
</li>
<li>Checkstyle and PMD integration thanks to Lily Masory: <a href="https://github.com/ymasory/sbt-code-quality.g8">https://github.com/ymasory/sbt-code-quality.g8</a>
</li>
<li>Findbugs integration thanks to Joachim Hofer: <a href="https://bitbucket.org/jmhofer/findbugs4sbt/wiki/Home">https://bitbucket.org/jmhofer/findbugs4sbt/wiki/Home</a>
</li>
<li>Jacoco integration thanks to Joachim Hofer: <a href="https://bitbucket.org/jmhofer/jacoco4sbt">https://bitbucket.org/jmhofer/jacoco4sbt</a>
</li>
<li>JavaDoc/ScalaDoc integration thanks to Yvonnick Esnault: <a href="https://github.com/yesnault/Play20StartApp/">https://github.com/yesnault/Play20StartApp/</a>
</li>
<li>Many tweaks thanks to Mike Slinn: <a href="https://github.com/mslinn">https://github.com/mslinn</a>
</li>
</ul><h1>
<a name="play-version" class="anchor" href="#play-version"><span class="octicon octicon-link"></span></a>Play version</h1>

<p>Last tested on Play 2.2.0</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Play-Example-Quality-Assurance maintained by <a href="https://github.com/ics-software-engineering">ics-software-engineering</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
